{{/* layouts/partials/profile.html */}}
<div class="flex flex-col items-center mb-8">
  {{ with .Params.profileImage }}
    {{/* Try Hugo Assets pipeline first (assets/images or page bundle). If not found, fall back to static path. */}}
    {{ $res := resources.Get . }}
    {{ if $res }}
      {{ if eq $res.MediaType.SubType "svg" }}
        <img src="{{ $res.RelPermalink }}"
             loading="lazy"
             decoding="async"
             alt="{{ $.Params.name }}"
             class="profile-pic mb-4">
      {{ else }}
        {{ $small := $res.Fill "240x240 q80" }}
        <img src="{{ $small.RelPermalink }}"
             srcset="{{ $small.RelPermalink }} 240w, {{ $res.RelPermalink }} 480w"
             sizes="(max-width: 600px) 120px, 240px"
             loading="lazy"
             decoding="async"
             alt="{{ $.Params.name }}"
             class="profile-pic mb-4">
      {{ end }}
    {{ else }}
      <img src="{{ . | relURL }}"
           loading="lazy"
           decoding="async"
           alt="{{ $.Params.name }}"
           class="profile-pic mb-4">
    {{ end }}
  {{ end }}
  <h1 class="text-3xl font-bold mb-2 text-center" style="color: var(--text-color)">
    {{ .Params.name }}
  </h1>
  <p class="text-center opacity-80 mb-6">{{ .Params.description }}</p>
  <div class="flex flex-wrap justify-center gap-4 mb-8 social-icons">
    {{ range .Params.socials }}
      <a href="{{ .url }}" class="text-xl" target="_blank" rel="noopener">
        <i class="{{ .icon }} icon"></i>
      </a>
    {{ end }}
  </div>
</div>
